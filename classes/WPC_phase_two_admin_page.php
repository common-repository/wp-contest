<?php /*  * 	@PACKAGE WP CONTEST*	USE: USE TO GET UI OF PHASE TWO ADMIN PAGE*/if(!class_exists('WPC_phase_two_admin_page')){	class WPC_phase_two_admin_page{		private $_contest_id = null;	/*	*	@param $contest_id	*/	public function __construct($contest_id){		$this->_contest_id = $contest_id;	}		/*	*	PHASE TWO ADMIN PAGE CONTENT	*/		public function WPC_phase_two_admin_page_view(){				$contest_id = $this->contest_id();		$all_contest_id = wpc_get_all_contest_id();		$all_entries_id = wpc_get_all_paid_entry_id_by_contest_id($contest_id);		// if any contest not found		if(!count($all_contest_id)){			return __('No Contest Found', 'wpc');		}		// if contest id not matche to any saved contest id		if(!in_array( $contest_id, $all_contest_id)){			return __( 'No Contest Found', 'wpc');		}		// if any entry not found in contest		if(!$all_entries_id){			return __('No Photos Found Yet in Phase Two', 'wpc');		}				echo '<div class="voting_summery"><h2>'. __('Judges Voting Info', 'wpc').'</h2>';		//get all judges		$all_judges_obj = wpc_get_judges();		// if judge found		if(count($all_judges_obj) >= 1 ){			$total_voting_left = 0;			foreach($all_judges_obj as $judge){				$judge_left_vote = wpc_the_judge_total_num_images_yet_to_vote_in_phase_two($contest_id, $judge->ID);				$total_voting_left += $judge_left_vote;				//if any photo not voted by a judge				if($judge_left_vote != '0'){					echo '<div class="single_judge_vote_left" ><b>'.$judge->display_name.':</b> '.$judge_left_vote.'</div>';				}			}			//SHOW TOTAL NUMBER OF VOTE LEFT BY ALL JUDGES			if($total_voting_left != '0'){				echo '<hr /><div class="_vote_left">'.__('Total Vote Left', 'wpc').': '.$total_voting_left.'</div>';			}else{				//SHOW COMPLETE VOTE BY ALL JUDGES				echo '<div class="no_vote_left">'.__('All Judges Completed Vote', 'wpc').'</div>';			}		}else{			echo __('No Judges Found To Vote', 'wpc');		}		echo '</div>';		?>		<div class="pop_filter_wrap">			Order By			<select name="" id="pop_filter_order" class="pop_filter_order">				<option value="desc">Entry ID Descending</option>				<option value="asc">Entry ID Ascending</option>				<option value="score_asc">Score Ascending</option>				<option value="score_desc">Score Descending</option>			</select>			<input class="filter_show_winner" type="checkbox" /><span>Show Winner Only</span>					</div>		<div class="equalHMVWrap eqWrap">			<?php 			$currentPage = !empty($_GET['pop_page']) ? (int) sanitize_text_field ( $_GET['pop_page'] ) : 1;						$allItems = $all_entries_id;			$pl = new WPCPageLister($allItems, $currentPage);			$pageList = $pl->makePageList();			$currentItems = $pl->getCurrentItems();			foreach($currentItems as $entry_id ){				$entry_values = wpc_get_entry($entry_id);				$entry_meta = unserialize( $entry_values['entry_meta'] );				$img_src = wpc_upload_dir_url().$entry_meta['image'];				if( wpc_get_score($entry_id) && (wpc_get_score($entry_id) !== 0) ){					$score = wpc_get_score($entry_id);					$scoreAttr = $score;				}else{					$score = __('Not Scoreed Yet', 'wpc');					$scoreAttr = 0;				}				?>				<div score="<?php echo $scoreAttr; ?>" entry_id="<?php echo $entry_id; ?>" class="equalHMV eq single_entry <?php if(get_option( 'wpc_winner_list_'.$contest_id )){  if(in_array($entry_id, get_option( 'wpc_winner_list_'.$contest_id ))){ echo 'pop_winner'; }  } ?>">					<div class="single_photo_wrap">						<?php  if( wpc_get_score($entry_id) && (wpc_get_score($entry_id) !== 0) ){?>							<div class="__score"><?php echo wpc_get_score($entry_id);  ?></div>							<?php  }														?>							<div class="img_holder">								<div class="mark_as_winner_wrap">									<input <?php if(get_option( 'wpc_winner_list_'.$contest_id )){  if(in_array($entry_id, get_option( 'wpc_winner_list_'.$contest_id ))){ echo 'checked'; }  } ?> contest_id="<?php echo $contest_id; ?>" value="<?php echo $entry_id; ?>" class="pop_mark_as_winner" type="checkbox" /><span>Mark as winner</span>								</div>								<img src="<?php echo $img_src; ?>" alt="" />							</div>							<div class="img_bottom_holder">								<hr />								<div class="img_info_box">									<h3><?php _e('Image Number', 'wpc'); ?>: <?php  echo  $entry_values['id']; ?></h3>									<h3><?php _e('Title', 'wpc'); ?>: <?php echo $entry_meta['title']; ?></h3>									<h3><?php _e('Category', 'wpc'); ?>: <?php echo $entry_meta['category']; ?></h3>									<h3><?php _e('Description', 'wpc') ?>: <?php echo $entry_meta['description']; ?></h3>								</div>								<hr />								<div class="voting_info_box">									<?php echo  wpc_phase_two_single_entry_info_box($entry_id); ?>								</div>								<hr />							</div>						</div>					</div>					<?php 				}				?>				</div>				<?php				$total_pages = count($pageList) - 2;				if($total_pages > 1){					$total_num = count($allItems);					echo '<div class="pop_pagination">';					echo  wpc_admin_paginate_function(10, $currentPage, $total_num, $total_pages, $contest_id);					echo '</div>';				}			}//RETURN CONTEST ID			private function contest_id(){				return $this->_contest_id;			}		}	}