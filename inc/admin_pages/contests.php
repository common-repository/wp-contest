<?php/*	* 	@PACKAGE WP CONTEST	*	USE: content of Contests page*/?><div class="wrap">	<div style="" id="confirmBox">		<div class="message"></div>		<span class="button yes">Yes</span>		<span class="button no">No</span>	</div>	<?php	//Show Contest edit message	if(isset($_GET['status'])){					if($_GET['status'] == '1' ){	?>		<?php echo 'Contest Edited Successfully.'; ?>	<?php	}	}	if(count(wpc_get_judges()) > 3 ){	?>	<div class="alert alert-danger">		<?php _e('Only 3 judges allowed. Unlimited judges allowed on pro version only.', 'wpc'); ?>	</div>	<?php	}	?>	<table class="form-table">		<tbody>			<?php			// Show Contest edit field only when contest_id is set			if(isset($_GET['contest_id'])){				$contest_id = absint(  sanitize_text_field($_GET['contest_id']) );				if(wpc_if_contest_exist($contest_id)){					$WPC_contest_settings = new WPC_contest_settings($contest_id);					$settings = $WPC_contest_settings->WPC_the_contest_settings();																													?>			<form method="post" action="admin-post.php">				<tr>										<th colspan="2">						<h1>Contest Settings</h1>					</th>									</tr>				<tr>										<th colspan="2">						<div class="highlight">							<p>								For further instructions on how to setup your contest please see our <a href="https://wordpresscontestplugin.com/documentation/" target="blank">documentation</a>.<br/>								Fields marked with an <span class="description">*</span> are required. Fields marked with <span class="description">√</span> are <a href="http://wordpresscontestplugin.com/#pricing" target="blank">pro features</a>.							</p>						</div>						<br/>						<div class="page-sub-menu">							<ul>								<li><a href="#contest-settings">Contest</a></li>								<li><a href="#contestants-settings">Contestants</a></li>								<li><a href="#entry-settings">Submissions & Entries</a></li>								<li><a href="#voting-round-criteria">Voting Round Criteria</a></li>								<li><a href="#additional-fields">Additional Fields</a></li>								<li><a href="#notify-winners">Notify Winners</a></li>							</ul>						</div>					</th>									</tr>								<tr id="contest-settings">										<th colspan="2">						<h3>Contest Settings</h3>					</th>									</tr>				<tr class="form-field form-required">					<th scope="row" style="width:30%;">						<label for="title"><?php _e('Contest Title', 'wpc'); ?><span class="description">*</span>					</label>				</th>				<td>					<input  type="text" name="title" value="<?php if( $settings['title'] ){ echo $settings['title']; } ?>" />									</td>			</tr>						<tr class="form-field form-required">				<th scope="row">					<label for="contest_on_off" <?php if(count(wpc_number_of_active_contest()) > 0 ){ if(wpc_number_of_active_contest()[0] != $contest_id ){ echo 'data-toggle="tooltip" title="Only one active contest at a time. Unlimited active contest available on pro version only."'; }} ?>><span class="pro-description">√</span><?php _e('Contest Status', 'wpc'); ?><span class="description">*</span>				</label>			</th>			<td class="<?php if(count(wpc_number_of_active_contest()) > 0 ){ if(wpc_number_of_active_contest()[0] != $contest_id ){ echo 'pop_disabled_inputs'; }} ?>"  >				<input   <?php if($settings['contest_on_off']){ echo ($settings['contest_on_off'] == 'on') ? 'checked' : '';  } ?> type="radio" name="contest_on_off" value="on" />Active				<input  <?php if($settings['contest_on_off']){ echo ($settings['contest_on_off'] == 'off') ? 'checked' : '';  } ?>  type="radio" name="contest_on_off" value="off" />Closed			</td>		</tr>				<tr class="form-field form-required">			<th scope="row">				<label title="<?php _e('Only Free Contest Allowed. Install permium version to create paid contest. ', 'wpc'); ?>" data-toggle="tooltip" for="contest_type"><span class="pro-description">√</span><?php _e('Charge Contestants?', 'wpc'); ?>			</label>			<p>Charge contestants a fee to submit entries?</p>		</th>		<td class="pop_disabled_inputs" >			<input name="contest_type" <?php if($settings['contest_type'] == 'paid'){ echo 'checked'; } ?> type="radio" value="paid" disabled/> Paid			<input  name="contest_type"  <?php if($settings['contest_type'] == 'free'){ echo 'checked'; } ?> type="radio" value="free" /> Free		</td>	</tr>	<tr class="form-field form-required">		<th scope="row">			<label data-toggle="tooltip" title="<?php _e('Only Voting round avaliable in free version', 'wpc'); ?>" for="current_phase"><?php _e('Current Voting Round', 'wpc'); ?>			</label>		</th>		<td class="pop_disabled_inputs">			<input <?php if($settings['current_phase']){ echo ($settings['current_phase'] == 1) ? 'checked' : ''; } ?> type="radio" name="current_phase" value="1" disabled/>Elimination Round			<input <?php if($settings['current_phase']){ echo ($settings['current_phase'] == 2) ? 'checked' : '';  } ?>  type="radio" name="current_phase" value="2" />Voting Round		</td>	</tr>	<tr class="form-field form-required">		<th scope="row">			<label data-toggle="tooltip" title="<?php _e('This feature available on pro version only.', 'wpc'); ?>" for=""><span class="pro-description">√</span><?php _e('Elimination Round Threshold', 'wpc'); ?>		</label>		<p>If this criteria is met, the entry will be excluded from the voting round.</p>	</th>	<td class="pop_disabled_inputs">		<?php _e('If', 'wpc'); ?>		<select readonly name="phsae_one_vote" id="" disabled>			<option <?php if($settings['phsae_one_vote'] == 'no'){ echo ' selected '; }?> value="no">No</option>			<option  <?php if($settings['phsae_one_vote'] == 'yes'){ echo ' selected '; }?> value="yes">Yes</option>			<option  <?php if($settings['phsae_one_vote'] == 'maybe'){ echo ' selected '; }?> value="maybe">Maybe</option>		</select>		<?php _e('votes', 'wpc'); ?>		<select readonly name="phase_one_oparetor" id="" disabled>			<?php			foreach(wpc_conditon_oparetors() as $oparetor ){				$selected = ( $settings['phase_one_oparetor'] == $oparetor ) ? 'selected' : '';				echo '<option '.$selected.'  value="'.$oparetor.'">'.$oparetor.'</option>';			}			?>		</select>						<input readonly name="phase_one_vote_count" style="width:50px;" type="number" value="<?php if($settings['phase_one_vote_count']){ echo $settings['phase_one_vote_count']; } ?>" />	</td></tr><tr id="contestants-settings">		<th colspan="2">		<h3>Contestants Settings</h3>	</th>	</tr><tr class="form-field form-required">	<th scope="row">		<label for="who_can_upload"><?php _e('Who Can Upload Photos?', 'wpc'); ?><span class="description">*</span>	</label></th><td>	<input <?php if($settings['who_can_upload']){ echo ($settings['who_can_upload'] == 'all_loggedin_user') ? 'checked' : '';  } ?> type="radio" value="all_loggedin_user" name="who_can_upload" />Any Logged In User	<input <?php if($settings['who_can_upload']){ echo ($settings['who_can_upload'] == 'wpc_contestant') ? 'checked' : '';  } ?>  type="radio" value="wpc_contestant" name="who_can_upload" />Contestants Only</td></tr><tr class="form-field form-required"><th scope="row">	<label for="max_num_files">Max Entries Per User<span class="description">*</span></label></th><td><input id="max_num_files" type="number" name="max_num_files" value="<?php if($settings['max_num_files']){ echo $settings['max_num_files']; }  ?>"></td></tr><tr class="form-field form-required"><th scope="row"><label for="upload_type"><span class="pro-description">√</span><?php _e('Submission Method', 'wpc'); ?></label><p>In the pro version contestents can submit entries via link and/or upload.</p></th><td><select name="upload_type" id="upload_type" disabled><option  <?php if($settings['upload_type']== 'file'){ echo 'selected';  } ?>  value="file"><?php _e('File', 'wpc'); ?></option><option  <?php if($settings['upload_type']== 'link'){ echo 'selected';  } ?>  value="link"><?php _e('Link', 'wpc'); ?></option><option  <?php if($settings['upload_type']== 'file_n_link'){ echo 'selected';  } ?>  value="file_n_link"><?php _e('File or Link', 'wpc'); ?></option></select></td></tr><tr class="form-field form-required"><th scope="row"><label data-toggle="tooltip" title="<?php _e('JPG and PDF files allowed only. Install pro Version for other file extensions.', 'wpc'); ?>" for="file_types"><span class="pro-description">√</span>Allowed File Types</label></th><td><input readonly id="file_types" type="text" name="file_types" value="<?php if($settings['file_types']){ echo $settings['file_types']; }  ?>"></td></tr><tr class="form-field form-required"><th scope="row"><label for="upload_cost"><span class="pro-description">√</span><?php _e('Cost Per Entry', 'wpc'); ?></label></th><td><input  readonly id="upload_cost" type="number" name="upload_cost" value="<?php if($settings['upload_cost']){ echo $settings['upload_cost'];  } ?>" /></td></tr><tr class="form-field form-required"><th scope="row"><label for="maximum_entry" data-toggle="tooltip" title="<?php _e('Only 50 entries allowed per contest. Unlimited entries allowed on pro version only.', 'wpc'); ?>"><span class="pro-description">√</span><?php _e('Maximum Number Of Entry', 'wpc'); ?></label></th><td><input readonly  id="maximum_entry" type="number" name="maximum_entry" value="<?php if($settings['maximum_entry']){ echo $settings['maximum_entry'];  } ?>" /></td></tr><tr id="entry-settings"><th colspan="2"><h3>Submissions & Entry Settings</h3></th></tr><tr class="form-field form-required"><th scope="row"><label for="title_label"><?php _e('Title Field Label', 'wpc'); ?><span class="description">*</span></label></th><td><input   id="title_label" type="text" name="title_label" value="<?php if($settings['title_label']){ echo $settings['title_label'];  } ?>" /></td></tr><tr class="form-field form-required"><th scope="row"><label for="category_label"><?php _e('Category Field Label', 'wpc'); ?><span class="description">*</span></label></th><td><input  id="category_label" type="text" name="category_label" value="<?php if($settings['category_label']){ echo $settings['category_label'];  } ?>" /></td></tr><tr class="form-field form-required"><th scope="row"><label for="category_options"><?php _e('Entry Categories', 'wpc'); ?><span class="description">*</span></label><p>Separate multiple categories by commas.</p></th><td><input id="category_options" type="text" name="category_options" value="<?php if($settings['category_options']){ echo implode(",", $settings['category_options']);  } ?>" /></td></tr><tr class="form-field form-required"><th scope="row"><label for="description_label"><?php _e('Description Label', 'wpc'); ?><span class="description">*</span></label></th><td><input id="description_label" type="text" name="description_label" value="<?php if($settings['description_label']){ echo $settings['description_label'];  } ?>" /></td></tr><tr class="form-field form-required"><th scope="row"><label for="upload_label"><?php _e('Upload Field Label', 'wpc'); ?><span class="description">*</span></label></th><td><input id="upload_label"  type="text" name="upload_label" value="<?php if($settings['upload_label']){ echo $settings['upload_label'];  } ?>" /></td></tr><tr class="form-field form-required"><th scope="row"><label for="tos_page_id"><?php _e('Terms & Condition Page', 'wpc'); ?><span class="description">*</span></label></th><td><select id="tos_page_id" style="width:30%" type="text" name="tos_page_id"  /><?php $tos_page_id = $settings['tos_page_id'] ? $settings['tos_page_id'] : 0 ;echo wpc_list_pages_as_dropworn_options($tos_page_id); ?></select></td></tr><input type="hidden" name="contest_id" value="<?php echo $contest_id; ?>" /><input type="hidden" name="action" value="wpc_save_single_contest" /><?php wp_nonce_field('wpc_save_single_contest_verify'); ?><tr class="form-field form-required"><td><input type="submit" name="editsubmit" id="submit" class="button button-primary edit_contest" value="Save Settings"></td></tr></form><!-- phase two voting table --><tr><td  colspan="3" ><h1><?php _e('Voting Round Criteria', 'wpc' ); ?></h1><p>Set the criteria (left column) and scoring labels (top row) that judges will see in the voting round.</p></td></tr><tr><td   colspan="3" ><div class="fields_validation"><?phpif(isset($_GET['error_criteria'])){echo $_GET['error_criteria'];}if(isset($_GET['success_criteria'])){echo $_GET['success_criteria'];}?></div><form method="post" action="admin-post.php"><table class="phasetwovoting" style="width:100%"><?php	$voting_criterias = wpc_get_phase_two_voting_criterias($contest_id);	$voting_criterias =  unserialize( $voting_criterias);	$grades =  $voting_criterias['grades'];	$criterias =  $voting_criterias['criteria'];	?><tr><th><?php _e('Criteria', 'wpc'); ?></th><th><?php _e('Votes 1-3 Label', 'wpc'); ?><br/><input  class="grade" value="<?php if($grades[0]){ echo $grades[0]; } ?>" name="grade_names[]" type="text" /></th><th><?php _e('Votes 4-6 Label', 'wpc'); ?><br/><input  class="grade"  value="<?php if($grades[1]){ echo $grades[1]; } ?>"  name="grade_names[]" type="text" /></th><th><?php _e('Votes 7-10 Label', 'wpc'); ?><br/><input class="grade" value="<?php if($grades[2]){ echo $grades[2]; } ?>"  name="grade_names[]" type="text" /></th><th><span title="<?php _e('Add Criteria:', 'wpc'); ?>" class="add_criteria">+</span></th></tr><?php	if($criterias){		$ii = 0;		foreach($criterias as $criteria){				$criteria_name = wpc_stripout_spcl_char($criteria);?><tr class="single_criteria"  criteria_id="<?php echo  str_replace(" ","", $criteria_name); ?>" ><td><input name="criterias[]" type="text" class="single_criteria_label" value="<?php echo $criteria; ?>" /></td><td>1 <input name="<?php echo $criteria_name.'_radio'; ?>" type="radio" />2 <input name="<?php echo $criteria_name.'_radio'; ?>" type="radio" />3 <input name="<?php echo $criteria_name.'_radio'; ?>" type="radio" /></td><td>4 <input name="<?php echo $criteria_name.'_radio'; ?>" type="radio" />5 <input name="<?php echo $criteria_name.'_radio'; ?>" type="radio" />6 <input name="<?php echo $criteria_name.'_radio'; ?>" type="radio" />7 <input name="<?php echo $criteria_name.'_radio'; ?>" type="radio" /></td><td>8 <input name="<?php echo $criteria_name.'_radio'; ?>" type="radio" />9 <input name="<?php echo $criteria_name.'_radio'; ?>" type="radio" />10 <input name="<?php echo $criteria_name.'_radio'; ?>" type="radio" /></td><td><?php if($ii != 0){ ?><span title="Remove Criteria" criteria_id="<?php echo  str_replace(" ","", $criteria_name); ?>" id="remove_criteria">-</span><?php } ?></td></tr><?php$ii++;}}?></table><input type="hidden" name="action" value="wpc_save_phase_two_criteria" /><input type="hidden" name="contest_id" value="<?php echo $contest_id; ?>" /><?php wp_nonce_field('wpc_save_phase_two_criteria_verify'); ?><br/><input id="two_criteria_submit" value="Save Criteria" name="two_criteria_submit" class="button button-primary" type="submit" /></td></form></tr><!-- phase two voting END --><tr><td colspan="3"><h1><?php _e('Additional Fields', 'wpc' ); ?></h1><p>You can add fields that contestants can complete with their entries. Add fields below, mark if they're required and re-order by dragging and dropping the rows.</p></td></tr><tr><td colspan="3"><div class="fields_validation"><?phpif(isset($_GET['fields_saving_error'])){	echo $_GET['fields_saving_error'];	}if(isset($_GET['fields_saving_success'])){	echo 'Fields Saved Properly';	}?></div><form method="post" action="admin-post.php"><div class="add_fields_type"><h3 class="add-field-heading">Add Field</h3><?php echo wpc_get_fields_type(); ?></div><div class="addtional_fields_wrap"><div id="pop_addtional_fields_sortable" class="addtional_fields"><?php	echo wpc_get_field_by_contest_id($contest_id) ?></div></div><input type="hidden" name="contest_id" value="<?php echo $contest_id; ?>" /><input type="hidden" name="action" value="wpc_save_contest_addtional_fields" /><?php wp_nonce_field('wpc_save_contest_addtional_fields_verify'); ?><br/><input id="pop_field_submit" value="Save Fields" name="pop_field_submit" class="button button-primary" type="submit" /></form></td></tr><!-- Notify users section  --><tr><td colspan="3"><h1><?php _e('Notify Winners', 'wpc' ); ?></h1><p><?php _e('Please include a custom message to winners. Clicking on "Send Message" will send an <br /> email with your message to contestant who have entries that are marked as winner.', 'wpc' ); ?></p></td></tr><tr><td colspan="3"><p class="pop_winner_notification_result"></p><form action="" class="pop_winner_notification_form"><div class="sending_mail"><span class="dashicons dashicons-image-rotate sending_mail_rotate"></span></div><label for="winner_notification_subject"><?php _e('Winner Notification Subject', 'wpc'); ?><span class="description">*</span></label><p></p><input style="width: 212px;" type="text" id="winner_notification_subject" /><p></p><label for="winner_notification_message"><?php _e('Winner Notification Message', 'wpc'); ?><span class="description">*</span></label><p></p><textarea name="" id="winner_notification_message" cols="30" rows="10"></textarea><p></p><input value="<?php echo $_GET['contest_id']; ?>" type="hidden" id="notification_contest_id" /><input id="winner_notification_submit" value="Send Message" name="winner_notification" class="button button-primary" type="submit"></form></td></tr><!-- Notify users section END --><?php }else{	echo '<h1>'.__('Contest not exist', 'wpc').'</h1>';}?><?php }else{	// if contest id not set show contest list	echo '<h1>'.__('Contests List', 'wpc').'</h1><br/>';	if(wpc_get_all_contest_id()){		foreach(wpc_get_all_contest_id() as $contest_id ){				echo '<h3 style="font-size: 1em;"><b><a href="'.get_admin_url().'admin.php?page=wpc_contests&contest_id='.$contest_id.'" style="text-decoration: underline;">'.wpc_get_contest_title($contest_id).'</a></b> (<span>ID :'.$contest_id.'</span>) <span contest_id="'.$contest_id.'" class="delet_contest button" style="margin-left:25px;vertical-align: inherit;">Delete</span></h3>';		}	}else{		echo '<h1>'.__('No Contest Found', 'wpc').'</h1>';	}		} ?></tbody></table></div>