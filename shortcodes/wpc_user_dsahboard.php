<?php /*  * 	@PACKAGE WP CONTEST*	USE: User dashboard shortcode*/if(!function_exists('wpc_user_dsahboard')){function wpc_user_dsahboard($atts, $content = null) {	extract(shortcode_atts(array(			'contest_id'=>'0',				),$atts,'wpc_user_dash'));			$output ='';	if($contest_id != '0'){	if(!is_user_logged_in()){ 	return 'Sorry, only contestants can see this information. If you’re a contestants please <a href="'.wp_login_url(get_the_permalink()).'">login</a> and return to this page.';	}		$current_user = wp_get_current_user();	$user_id = wp_get_current_user()->ID;		$all_contest_id = wpc_get_all_contest_id();	$all_entries_id = wpc_contest_user_all_entry_ids( sanitize_text_field( $contest_id ), $user_id);		if(!$all_contest_id){		return 'No Contest Found';	}	if(!in_array( $contest_id, $all_contest_id)){		 return 'No Contest Found';	}	if(!count($all_entries_id)){		return 'You have not submitted an entry yet';	}	$WPC_contest_settings = new WPC_contest_settings($contest_id);	$settings = $WPC_contest_settings->WPC_the_contest_settings();	if( ($settings['who_can_upload'] == 'wpc_contestant') && !in_array('wpc_contestant', $current_user->roles)){		return 'Sorry, only contestants can see this information. If you’re a contestants please <a href="'.wp_login_url(get_the_permalink()).'">login</a> and return to this page.';	}				$output .= '	<div class="popuser_dash_board_wrap">		<h1 class="contest_title" >'.wpc_get_contest_title($contest_id).'</h1>		<div class="popuser_dash_board_table_wrap">			<table class="popuser_dash_board_table judge_dashboard_table" width="100%">				<tr>					<th>Submission ID</th>					<th>Entry</th>					<th>Submitted on</th>					<th>Status</th>					<th>Score</th>					<th>Download</th>				</tr>';		if(wpc_entries_eligible_for_phase_two($contest_id)){			$photos_of_phase_two = wpc_entries_eligible_for_phase_two($contest_id);		}else{			$photos_of_phase_two = array();		}		foreach($all_entries_id as $entry_id){		$entry_values = wpc_get_entry($entry_id);		$entry_meta = unserialize( $entry_values['entry_meta'] );		$img_src = wpc_upload_dir_url().$entry_meta['image'];				if(in_array($entry_id, $photos_of_phase_two)){			$status = 'Voting Round';		}elseif(wpc_if_out_of_contest($entry_id)){			$status = 'Out Of Contest';		}else{			$status = 'Elimination Round';		}		if( wpc_get_score($entry_id) && (wpc_get_score($entry_id) !== 0) ){			$score = wpc_get_score($entry_id);			$scoreAttr = $score;		}else{			$score = "Not Scored Yet";			$scoreAttr = 0;		}				$output .= '<tr>					<th>'.$entry_id.'</th>					<th><img class="entry_img" src="'. esc_url_raw( $img_src ).'" alt="" /></th>					<th>'.$entry_values['entry_time'].'</th>					<th>'.$status.'</th>					<th>'.$score.'</th>					<th>						<form method="post" class="pop_pdf_download_form">							<input type="hidden" value="'.$entry_id.'"  name="get_entry_id" />							<input value="Download" type="submit" name="download_entry"/>						</form>					</th>				</tr>';		}				$output .= '	</table>		</div>	</div>';										}		return $output;}}